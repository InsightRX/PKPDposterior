% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/new_stan_data.R
\name{new_stan_data}
\alias{new_stan_data}
\title{Create a data object for use in get_mcmc_posterior()}
\usage{
new_stan_data(
  regimen,
  covariates,
  data,
  parameters,
  fix = NULL,
  iiv,
  ruv,
  dose_cmt = 1,
  ltbs = FALSE,
  verbose = FALSE
)
}
\arguments{
\item{regimen}{Regimen object (created by \code{\link[PKPDsim:new_regimen]{PKPDsim::new_regimen()}})}

\item{covariates}{List of covariate objects created by
\code{\link[PKPDsim:new_covariate]{PKPDsim::new_covariate()}}}

\item{data}{Data frame with columns \code{t}, \code{dv}, and \code{cmt}}

\item{parameters}{list of population parameters, e.g. \code{list(CL = 5, V = 50)}}

\item{fix}{optional, vector of parameters to fix. These parameters will
be sampled from the posterior with negligibly narrow distribution. This is
considered a quick-and-dirty way to fix a parameter, and will slow down HMC
sampling. It should therefore only be used for testing purposes. To
properly fix a parameter, remove it from the parameter list and hardcode
it in the model.}

\item{iiv}{list of inter-individual variability for parameters. Should have
exact same list elements as \code{parameters}, and magnitude supplied on SD scale.}

\item{ruv}{magnitude of residual unexplained variability (RUV). Should be a
list specifying proportional and/or additive error magnitude on standard
deviation scale, e.g. \code{list("prop" = 0.1, "add" = 1)}. If \code{ltbs} is TRUE,
should specify only an \code{add} part, which applies an additive error on the
log-scale (which then becomes an approximate proportional error).}

\item{dose_cmt}{Specify what dose compartment. Observation compartment in
dataset is irrelevant, handled in model.}

\item{ltbs}{use log-transform-both-sides approach for observations? Default
is \code{FALSE}.}

\item{verbose}{verbosity}
}
\value{
Named list suitable for passing on to Torsten.
}
\description{
Create a data object for use in get_mcmc_posterior()
}
\examples{
regimen <- PKPDsim::new_regimen(
  amt = 1500, 
  n = 4, 
  times = c(0, 12, 24, 36), 
  type = 'infusion'
)
covariates <- list(
  WT = PKPDsim::new_covariate(
    value = c(150, 149.5),
    times = c(0, 30),
    unit = "kg"
  ),
  CRCL = PKPDsim::new_covariate(
    value = c(6.5, 6.7),
    times = c(0, 12),
    unit = "l/hr"
  )
)
tdm_data <- data.frame(
  t = c(1, 2), 
  dv = c(900, 800), 
  cmt = c(2, 2)
)
new_stan_data(
  regimen, 
  covariates, 
  tdm_data,
  parameters = list(CL = 5, V = 50),
  iiv = list(CL = 0.1, V = 0.2),
  ruv = list(prop = 0.1, add = 1)
)

}
