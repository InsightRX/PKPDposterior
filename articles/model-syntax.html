<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="PKPDposterior">
<title>Model syntax • PKPDposterior</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Model syntax">
<meta property="og:description" content="PKPDposterior">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PKPDposterior</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/PKPDposterior.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Documentation</h6>
    <a class="dropdown-item" href="../articles/model-syntax.html">Model syntax</a>
    <a class="dropdown-item" href="../articles/sampler-settings.html">Sampler settings</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Examples</h6>
    <a class="dropdown-item" href="../articles/example-vanco.html">Vancomycin</a>
    <a class="dropdown-item" href="../articles/example-pkpd-neutropenia.html">Neutropenia (PKPD)</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="model-syntax_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Model syntax</h1>
            
      
      
      <div class="d-none name"><code>model-syntax.Rmd</code></div>
    </div>

    
    
<p>As shown in the various examples, models are generated using <code><a href="../reference/new_stan_model.html">new_stan_model()</a></code>. The main requirement is that the ODE model <code>dAdt</code> is defined.</p>
<p>The variable names in the table below are reserved, i.e. they cannot be used in the ODE model code, since PKPDposterior adds these to each model so that it is possible to perform structured analyses.</p>
<p>The following variables are recognized, with their approximate equivalent in NONMEM, if available.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Variable name</th>
<th>Meaning</th>
<th>NONMEM equivalent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>dv</code></td>
<td>Vector of observed values</td>
<td>
<code>DV</code> column in input</td>
</tr>
<tr class="even">
<td><code>ipred</code></td>
<td>Vector of predicted values for all event times</td>
<td>
<code>IPRED</code> column in output</td>
</tr>
<tr class="odd">
<td><code>ipred_obs</code></td>
<td>Vector of predicted values for observation records only</td>
<td>
<code>IPRED</code> column in output for records where <code>EVID==0</code>
</td>
</tr>
<tr class="even">
<td><code>ipred_ruv</code></td>
<td>Vector of predicted values for observation records only, with residual variability simulated</td>
<td>
<code>Y</code> in model file, <code>DV</code> in output table</td>
</tr>
<tr class="odd">
<td><code>n_t</code></td>
<td>Number of event records</td>
<td>Number of rows in input dataset</td>
</tr>
<tr class="even">
<td><code>n_cmt</code></td>
<td>Number of compartments</td>
<td></td>
</tr>
<tr class="odd">
<td><code>n_obs</code></td>
<td>Number of observations</td>
<td>Number of rows in input dataset with <code>EVID==0</code>
</td>
</tr>
<tr class="even">
<td><code>i_obs</code></td>
<td>Index of observation records within all event records</td>
<td></td>
</tr>
<tr class="odd">
<td><code>theta</code></td>
<td>Vector of model parameters</td>
<td>
<code>$THETA</code> (although not same data format)</td>
</tr>
<tr class="even">
<td><code>ode</code></td>
<td>Function for the ODE system</td>
<td><code>$ODE</code></td>
</tr>
<tr class="odd">
<td><code>A</code></td>
<td>Vector of amounts in compartments</td>
<td>
<code>A</code> in model file</td>
</tr>
<tr class="even">
<td><code>dAdt</code></td>
<td>Vector of gradients for ODE system</td>
<td>
<code>DADT</code> in model file</td>
</tr>
<tr class="odd">
<td><code>prior_&lt;parameter&gt;</code></td>
<td>Samples of prior parameter distribution</td>
<td></td>
</tr>
</tbody>
</table>
<p>For models with more than one observation type, such as PK-PD models, or a parent-metabolite model, the variables related to observations (i.e. the variables listed in the first 8 rows) are appended with a tag for the respective observation type, e.g. <code>dv_pk</code> and <code>dv_pd</code>, or <code>dv_parent</code> and <code>dv_metab</code>, etc. See the neutropenia model for an example.</p>
<p>If you want to leverage functionality within PKPDposterior, but you cannot (or prefer not to) use <code><a href="../reference/new_stan_model.html">new_stan_model()</a></code> to create the model, you should use the above variable names as well, so that output can be parsed appropriately by PKPDposterior functions.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ron Keizer, Jasmine Hughes, Dominic Tong, Kara Woo, InsightRX.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
